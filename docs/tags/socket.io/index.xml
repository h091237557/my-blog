<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>socket.io on æ‹¿éµæ´¾çš„é¦¬å…‹ Blog</title>
    <link>https://mark-lin.com/tags/socket.io/</link>
    <description>Recent content in socket.io on æ‹¿éµæ´¾çš„é¦¬å…‹ Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <managingEditor>h091237557@gmail.com (marklin)</managingEditor>
    <webMaster>h091237557@gmail.com (marklin)</webMaster>
    <lastBuildDate>Fri, 08 Mar 2019 19:51:35 +0800</lastBuildDate>
    
        <atom:link href="https://mark-lin.com/tags/socket.io/index.xml" rel="self" type="application/rss+xml" />
    


    <item>
      <title>Socket.io ä½¿ç”¨ AWS ALB å»ºç«‹ Load Balance å•é¡Œ</title>
      <link>https://mark-lin.com/posts/20190325/</link>
      <pubDate>Fri, 08 Mar 2019 19:51:35 +0800</pubDate>
      <author>h091237557@gmail.com (marklin)</author>
      <guid>https://mark-lin.com/posts/20190325/</guid>
      <description>socket.io æ˜¯ä¸€å¥—å¯ä»¥è®“æˆ‘å€‘å¿«é€Ÿèˆ‡ç°¡å–®çš„å»ºç«‹ä¸€å¥—ï¼Œè®“ client èˆ‡ server å¯ä»¥é›™å‘æºé€šçš„ Libaryï¼Œè€Œç•¶æˆ‘å€‘ä½¿ç”¨å®ƒä¾†å»ºç«‹ä¸€å€‹ message server å¾Œï¼Œé€šå¸¸åœ¨ä¸€å®šçš„ä½¿ç”¨é‡ä»¥å¾Œï¼Œæœƒé–‹å§‹çš„è€ƒæ…®è¦åŠ æ©Ÿå™¨ä¾†é€²è¡Œæ“´å±•ï¼ŒåŒæ™‚é–“ä¹Ÿæœƒå»ºç«‹ä¸€å° load balance çš„æ‡‰ç”¨ä¾†åˆ†æ•£è«‹æ±‚ã€‚
è€Œé€™æ™‚å¦‚æœä½ é¸æ“‡ä½¿ç”¨AWS ALB (Application Load Balancer)ä¾†å»ºç«‹ load balance ä½ æœƒç™¼ç¾å®ƒæœ‰å€‹å¾ˆå¤§çš„å•é¡Œï¼Œé‚£å°±æ˜¯ :
 ä½¿ç”¨éç€è¦½å™¨(æœªè™•ç† cookie )çš„ client ç„¡æ³•ä½¿ç”¨ polling ä¾†å»ºç«‹é€£ç·š
 æ¥ä¸‹ä¾†æˆ‘å€‘å°‡æ…¢æ…¢çš„ä¾†æ¢è¨åŸå› ç‚ºä½•ï¼Œä¸¦ä¸”ä¾†æƒ³æƒ³æ˜¯å¦æœ‰ä»€éº¼è§£æ³•å‘¢ ?
æœ¬ç¯‡æ–‡ç« æ¶æ§‹å¦‚ä¸‹ :
 åŸå›  è§£æ³•  åŸå›  ç‚ºä»€éº¼éç€è¦½å™¨çš„ Client ç„¡æ³•ä½¿ç”¨ polling ä¾†å»ºç«‹é€£ç·šå‘¢ ?
é€™è£¡æˆ‘å€‘å°±è¦å…ˆå¾ socket.io å»ºç«‹é€£ç·šçš„æµç¨‹é–‹å§‹èªªå•Ÿã€‚
Socket.io å»ºç«‹é€£ç·šåŸç† å‡è¨­æˆ‘å€‘åœ¨å·²ç¶“åœ¨ server ç«¯ä½¿ç”¨ socket.io ä¾†å»ºç«‹èµ· message serverï¼Œç„¶å¾Œæ¥ä¸‹ä¾†æˆ‘å€‘è¦åœ¨ client ç«¯ä½¿ç”¨socket.io clientä¾†å»ºç«‹é€£ç·šã€‚
var socket = require(&amp;#39;socket.io-client&amp;#39;)(&amp;#39;http://localhost&amp;#39;); è€Œ socket.io client é€™è£¡ä¸»è¦æä¾›äº†å…©ç¨® transport è®“æˆ‘å€‘ client èˆ‡ server å¯ä»¥äº’ç›¸çš„å‚³éè³‡æ–™ :</description>
    </item>
    
    <item>
      <title>Socket.io åŸå§‹ç¢¼åˆ†æä¹‹å»ºç«‹é€£ç·š</title>
      <link>https://mark-lin.com/posts/20170915/</link>
      <pubDate>Fri, 15 Sep 2017 19:51:35 +0800</pubDate>
      <author>h091237557@gmail.com (marklin)</author>
      <guid>https://mark-lin.com/posts/20170915/</guid>
      <description>é¦–å…ˆæˆ‘å€‘å…ˆä¾†çœ‹çœ‹æœ€ä¸€é–‹å§‹æ™‚ï¼Œè¦å»ºç«‹é€£ç·šæœƒé‚£äº›äº‹æƒ…ï¼Œå‡è¨­æˆ‘å€‘çš„ server å·²ç¶“é–‹å•Ÿ :
var io = require(&amp;#39;socket.io&amp;#39;).listen(8080); io.sockets.on(&amp;#39;connection&amp;#39;, function (socket) { console.log(&amp;#34;Hello xxxx client&amp;#34;); }); æ¥ä¸‹ä¾†æˆ‘å€‘è¦å¾å‰ç«¯é–‹å§‹è¿½è¹¤å®ƒåšäº†é‚£äº›äº‹æƒ…ã€‚
Client ç«¯å®ƒåšäº†ä»€éº¼å‘¢ ?? Socket.io-client å»ºç«‹é€£ç·šçš„åœ°æ–¹ åœ¨æœ€é–‹å§‹æ™‚ï¼Œä¸€å®šæ˜¯å‰ç«¯æœƒå»é€²è¡Œé€£ç·šï¼Œé‚£æˆ‘å€‘ä¾†çœ‹çœ‹ä»–åœ¨socket.io-clientä¸­ä»€éº¼åœ°æ–¹è¡Œè™•ç†ã€‚
å‰ç«¯èˆ‡ server ç«¯é€£çµçš„ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼Œå¾ä¸‹é¢ç¨‹å¼ç¢¼å¯çŸ¥ï¼Œæˆ‘å€‘åŸ·è¡Œio(&#39;xxxx&#39;)æ™‚ï¼Œä»–å°±æœƒå»å¾Œç«¯å»ºç«‹é€£ç·šã€‚
&amp;lt;script src=&amp;#34;/socket.io/socket.io.js&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var socket = io(&amp;#39;http://localhost&amp;#39;); socket.on(&amp;#39;connect&amp;#39;, function(){}); &amp;lt;/script&amp;gt; ç„¶å¾Œæˆ‘å€‘ä¾†çœ‹çœ‹ socket.io-client çš„é€™æ®µç¨‹å¼ç¢¼é•·å•¥æ¨£å­ï¼Œå¦‚ä¸‹ï¼Œä½†ä¸‹é¢ç¨‹å¼ç¢¼æˆ‘å€‘åªè¦å…ˆæ³¨æ„newConnectionè£¡é¢åšçš„äº‹æƒ…ï¼Œå› ç‚ºæˆ‘å€‘æ˜¯è¦å»ºç«‹æ–°çš„é€£ç·šã€‚
lookup åŸå§‹ç¢¼
function lookup (uri, opts) { .... if (newConnection) { debug(&amp;#39;ignoring socket cache for %s&amp;#39;, source); io = Manager(source, opts); } else { if (!cache[id]) { debug(&amp;#39;new io instance for %s&amp;#39;, source); cache[id] = Manager(source, opts); } io = cache[id]; } if (parsed.</description>
    </item>
    
    <item>
      <title>Socket.io çš„èªªè©±å³¶</title>
      <link>https://mark-lin.com/posts/20170914/</link>
      <pubDate>Thu, 14 Sep 2017 19:51:35 +0800</pubDate>
      <author>h091237557@gmail.com (marklin)</author>
      <guid>https://mark-lin.com/posts/20170914/</guid>
      <description>socket io æ˜¯ nodejs æ‰€æä¾›çš„å¥—ä»¶ï¼Œå®ƒä¸»è¦å¯ä»¥åšçš„äº‹æƒ…å°±æ˜¯æ¨æ’­åŠŸèƒ½ã€‚
ä½ æƒ³æƒ³ï¼Œå‡è¨­ä½ è¦åšå€‹è‚¡ç¥¨å ±åƒ¹ç¶²ç«™ï¼Œç„¶å¾Œç•¶ä½ å¾Œç«¯æ”¶åˆ°æ–°çš„è‚¡åƒ¹æ™‚ï¼Œä½ è¦å¦‚ä½•çš„é€åˆ°å‰ç«¯ ? åœ¨å‚³çµ±çš„ server èˆ‡ client æ¶æ§‹ä¸‹ï¼Œå› ç‚ºåªèƒ½ç”± client å‘ server ç™¼å‡ºè«‹æ±‚ï¼Œè€Œä¸èƒ½ç”± server ç™¼é€æ–°çš„è¨Šæ¯åˆ° clientï¼Œæ‰€ä»¥ç•¶æ™‚çš„äººå€‘çš„è§£æ±ºæ–¹æ¡ˆå°±æ˜¯è¼ªè©¢ï¼Œå›ºåæ€æ„å°±æ˜¯æŒ‡å®šæ™‚çš„å» server æ‰¾è³‡æ–™ã€‚
ä½†é€™ç¨®æ–¹æ¡ˆæœ‰ç¼ºé»ï¼Œä½ æƒ³æƒ³ï¼Œä½ æœ‰å¯èƒ½å» server æŠ“ 10 æ¬¡è³‡æ–™ï¼Œå®ƒæœ‰å¯èƒ½ 10 æ¬¡éƒ½æœ‰æ–°çš„è³‡æ–™å— ? ä¸ä¸€å®šå°å§ ? æ‰€ä»¥æœ€ç†æƒ³çš„æ–¹æ¡ˆä¸€å®šæ˜¯å¾ server ç«¯æœ‰æ–°è³‡æ–™å°±è‡ªå‹•æ¨é€åˆ° client ç«¯ã€‚
websocketå°±æ˜¯ä¸€å€‹ç”± html 5 æ‰€ç™¼å¸ƒçš„æ–°å”è­°ï¼Œå®ƒå°±å¯ä»¥åšåˆ°ä¸Šé¢æ‰€éœ€è¦çš„åŠŸèƒ½ã€‚
é‚£socket.ioæ˜¯å•¥ ? å®ƒæ˜¯æœƒæ ¹æ“šä½ çš„ client æ‰€æ”¯æ´çš„åŠŸèƒ½(websocketã€cometã€é•·è¼ªè©¢â€¦)ä¾†æ±ºå®šä½ å¾Œç«¯è¦å¦‚ä½•çš„ç™¼é€è³‡æ–™ï¼Œæ›´ç™½è©±æ–‡çš„èªªï¼Œä½ ä¸ç”¨ç®¡ä½ çš„ client æœ‰æ²’æœ‰æ”¯æ´ websocketï¼Œsocket.io ä¸€åˆ‡éƒ½è‡ªå‹•æœƒè™•ç†å¥½ï¼Œä½ åªè¦å’Œæˆ‘èªªå•¥æ™‚è¦é€è³‡è¨Šåˆ°å‰ç«¯å°±å°äº†ã€‚
Socket.io çš„çµ„æˆ è«‹åƒè€ƒç­†è€…çš„é€™ç¯‡æ–‡ç« ã€‚
Socketio çš„æ¶æ§‹
ç°¡å–® client èˆ‡ server çš„æºé€šç¯„ä¾‹ server ç«¯ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼Œé€™æ®µç¨‹å¼ç¢¼ç•¶èˆ‡ client ç«¯å»ºç«‹ä¸€æ¢ websocket é€£ç·šå¾Œï¼Œæœƒç›´æ¥å°è©²æ¢é€£ç·šå‚³é€å€‹{hello: &amp;quot;world&amp;quot;}è¨Šæ¯ã€‚
var io = require(&amp;#39;socket.io&amp;#39;).listen(8080); io.</description>
    </item>
    
    <item>
      <title>Socket.io çš„æ¶æ§‹</title>
      <link>https://mark-lin.com/posts/20170913/</link>
      <pubDate>Wed, 13 Sep 2017 19:51:35 +0800</pubDate>
      <author>h091237557@gmail.com (marklin)</author>
      <guid>https://mark-lin.com/posts/20170913/</guid>
      <description>socket.io æ˜¯ node js çš„ä¸€å€‹ frameworkï¼Œå®ƒå¯ä»¥å¹«åŠ©æˆ‘å€‘å»ºç«‹èŠå¤©å®¤é€™ç¨®æ¨æ’­åŠŸèƒ½çš„ç³»çµ±ï¼Œé€™ç¯‡æ–‡ç« æˆ‘å€‘ä¸æœƒèªªæ˜å®ƒå¦‚ä½•ä½¿ç”¨ï¼Œè€Œæ˜¯è¦ç†è§£ socket.io é€™å€‹å¥—ä»¶çš„æ¶æ§‹çµ„æˆã€‚
socket.io ä¸»è¦ç”±ä»¥ä¸‹å¹¾å€‹æ±æ±æ§‹æˆçš„ :
 engine.ioã€engino.io-client socket.io-parser socket.io-adapter socket.io-client socket.io-protocol  æ¥ä¸‹ä¾†æˆ‘å€‘å°‡ä¸€å€‹ä¸€å€‹èªªæ˜å®ƒå€‘æ˜¯åšå•¥ç”¨çš„ï¼Œä¸¦ä¸”æœ€å¾Œæœƒåœ¨é€²è¡Œä¸€å€‹ç¸½çµã€‚
engine.io engine.ioæ˜¯ä¸€å€‹å¯¦éš›åŸ·è¡Œ socket.io é€šè¨Šå±¤ç´šçš„ libaryï¼Œåš´æ ¼èªªèµ·ä¾†ï¼Œsocket.io çš„æ ¸å¿ƒå°±æ˜¯engine.ioï¼Œæ‰€æœ‰çš„å»ºç«‹é€£ç·šã€å‚³è¼¸è³‡è¨Šå¯¦éš›ä¸Šéƒ½æ˜¯ç”±å®ƒä¾†åšï¼Œä¸¦ä¸”æ ¹æ“šå‰ç«¯å‚³é€å›ä¾†çš„è³‡è¨Šï¼Œä¾†æ±ºå®šä½¿ç”¨ä»€éº¼å‚³è¼¸æ–¹å¼ã€‚
ç›®å‰ engine.io æ‰€æä¾›çš„æºé€šæ–¹å¼æœ‰ä»¥ä¸‹å¹¾ç¨® :
 polling-jsonp polling-xhr pollin websocket  ä¸Šé¢æœ‰æåˆ°ï¼Œsocket.io æœ¬èº«ä¸æä¾›é€£ç·šåŠŸèƒ½ï¼Œè€Œæ˜¯åœ¨ engine.io æ‰æä¾›ï¼Œæ‰€ä»¥äº‹å¯¦ä¸Šï¼Œå¦‚æœä½ æ²’æœ‰ä¸€å®šè¦ä½¿ç”¨åˆ° socket.io çš„åŠŸèƒ½ï¼Œè€Œåªæ˜¯è¦é€£ç·šåˆ° http server æˆ–æ˜¯ç›£è½ port çš„è©±ï¼Œåªè¦ç”¨ engine.io å°±å¤ äº†ï¼Œé€™é‚Šæœ‰å€‹é‡é»è¦è¨˜å¾— socket.io æ˜¯å€‹ framework è€Œ engine.io åªæ˜¯å€‹ libaryï¼Œåªè¦åˆ†çš„å‡ºé€™å…©å€‹å·®åˆ¥ï¼Œä½ å°±å¯ä»¥è‡ªç”±çš„é¸ä½ è¦çš„ä½¿ç”¨ã€‚
var engine = require(&amp;#39;engine.io&amp;#39;); var server = engine.listen(80); server.on(&amp;#39;connection&amp;#39;, function(socket){ socket.send(&amp;#39;utf 8 string&amp;#39;); socket.send(new Buffer([0, 1, 2, 3, 4, 5])); // binary data }); engino.</description>
    </item>
    
  </channel>
</rss>